\documentclass[11pt]{article}
\usepackage[margin=1in]{geometry}
\usepackage{setspace}
\usepackage{amsmath, amssymb}
\usepackage{booktabs}
\usepackage{hyperref}
\usepackage{booktabs}
\usepackage{pdflscape}
\usepackage{adjustbox}
\usepackage{caption}
\usepackage{threeparttable}

% --- appendix code blocks ---
\usepackage{listings}
\usepackage{xcolor}
\lstset{
  basicstyle=\ttfamily\small,
  breaklines=true,
  columns=fullflexible,
  keepspaces=true,
  frame=single,
  rulecolor=\color{black!30},
  showstringspaces=false
}

\doublespacing

\title{Consequences of Employment Protection?\\
Replication of Acemoglu and Angrist (2001)}
\author{Zhifan Frank Yin, Tyler Zhao}
\date{\today}

\begin{document}
\maketitle

% ============================================================
% NOTE TO READER:
% Per the project requirement, this document contains:
% (i) a detailed review of the original paper (with math),
% (ii) replication targets (Tables 2--4 in our replication),
% (iii) discussion of non-replicated evidence (Tables 5--6),
% (iv) reanalysis using modern causal methods (IPW, IPW+RA),
% (v) full R code appendices by context.
% ============================================================
 \textbf{\href{https://drive.google.com/file/d/1F6g4X2DggdUpdV8ELa7fFAd_gJjjMbAF/view?usp=drive_link}{Our video presentation}}

\section{Paper summary and research question}

Acemoglu and Angrist (2001) study the labor market consequences of the Americans with Disabilities Act (ADA), a federal law that requires employers to provide ``reasonable accommodation'' for disabled workers and prohibits discrimination in hiring, firing, and pay.\footnote{Acemoglu, D. and Angrist, J. D. (2001). ``Consequences of Employment Protection? The Case of the Americans with Disabilities Act,'' \emph{Journal of Political Economy} 109(5): 915--957.}  The central question the paper wished to investigate is whether the ADA actually improved labor market outcomes for disabled workers, and to what extent.

A key conceptual contribution of the paper is to frame the ADA as a special case of employment protection. In a standard competitive labor market, if a policy imposes additional expected costs on employing a specific group (here, disabled workers), firms may respond by reducing hiring of that group or shifting toward other margins such as task redesign, automation, or substitution to nondisabled workers. The ADA’s accommodation mandate can raise a per-worker cost (e.g., modifying workplace infrastructure or reallocating tasks). The ADA’s legal enforcement mechanism can also increase expected firing costs through litigation risk. In the presence of these costs, the firm’s optimal labor demand for disabled workers can decrease even if the policy is intended to reduce discrimination.

An important nuance emphasized by the authors is that the ADA can have ambiguous effects. If disability discrimination was previously substantial and enforcement meaningfully increases demand for disabled workers, employment could increase. But if accommodation and litigation costs dominate, employment could fall. The empirical objective is therefore to learn the net effect by comparing the time path of outcomes for disabled versus nondisabled individuals around the ADA’s implementation.

Empirically, the paper treats the ADA as a policy shock that took effect in the early 1990s. The main outcome metrics measured are the weeks worked and the average weekly earnings. The key comparison is between workers who report a work-limiting disability and otherwise similar nondisabled workers, before and after the ADA took effect in 1992. The primary finding is that, for men of all working ages and women under 40 years old, the employment of disabled workers had a marked drop after the ADA, with little evidence of offset wage gains. This pattern is consistent with the idea that the ADA operated mainly through increased costs of accommodation and litigation, rather than through a large increase in demand for disabled workers.

Formally, the empirical analysis begins from reduced-form regressions of the form
\begin{equation}
  y_{it}
  \;=\;
  x_{it}'\beta_t
  \;+\;
  \pi_t
  \;+\;
  \delta D_i
  \;+\;
  \alpha_t (D_i \times 1\{t\})
  \;+\;
  \varepsilon_{it},
\end{equation}
where $y_{it}$ is weeks worked or log weekly earnings for individual $i$ in year $t$, $D_i$ is an indicator for having a work-limiting disability, $x_{it}$ is a vector of controls (age, race, education, region, etc.) with time-varying effects, $\pi_t$ is a year effect, and $\alpha_t$ is the year-by-disability interaction. For post-ADA years, $\alpha_t$ measures how the employment (or wages) of disabled workers changed relative to nondisabled workers after the policy change, controlling for observed covariates.

% =========================
% ADDED: deeper context to lengthen review
% =========================

\subsection{Potential outcomes framing and target estimands}

It is useful (especially for a modern causal-inference reanalysis) to map the paper’s estimands into a potential outcomes framework. Let $Y_{it}(1)$ denote individual $i$’s potential outcome (weeks worked or log wage) in year $t$ under a world with ADA enforcement in effect (post-ADA regime), and $Y_{it}(0)$ under the counterfactual without ADA enforcement (pre-ADA regime). The central difficulty is that regime status is determined by calendar time, not by individual choice, and affects everyone simultaneously. Identification therefore relies on a difference-in-differences style comparison using nondisabled individuals as a comparison group.

Define $D_i \in \{0,1\}$ as disability status. The paper’s main event-study coefficients can be interpreted as identifying quantities of the form
\[
  \left( \mathbb{E}[Y_{it}(1)\mid D_i=1] - \mathbb{E}[Y_{it}(0)\mid D_i=1] \right)
  -
  \left( \mathbb{E}[Y_{it}(1)\mid D_i=0] - \mathbb{E}[Y_{it}(0)\mid D_i=0] \right),
\]
for post-ADA years $t$ relative to a baseline pre-ADA year. Under parallel trends (conditional on controls), these differences can be interpreted as the causal effect of the ADA regime on disabled workers’ outcomes relative to nondisabled workers.

\section{Data Description}

\subsection{Original data and key variables}

The original data in Acemoglu and Angrist (2001) come from the March Current Population Survey (CPS) for survey years 1988--1997.\footnote{See Section IV, ``Data and Descriptive Statistics,'' in Acemoglu and Angrist (2001).}  The CPS is a nationally representative monthly household survey conducted by the U.S.\ Census Bureau and the Bureau of Labor Statistics. The March survey includes an ``income supplement'' with detailed information on labor earnings, weeks worked in the previous calendar year, and receipt of public benefits.

The sample is restricted to individuals aged 21--58. This age range is chosen to ensure strong labor force attachment and to exclude teenagers and older individuals close to retirement, whose labor supply decisions are likely to follow different dynamics.\footnote{Acemoglu and Angrist (2001) explicitly state that they limit the sample to ages 21--58 because this group has strong labor force attachment.}  Within this age band, the paper further analyzes sub-groups by sex and age (21--39 vs.\ 40--58), since the ADA may have heterogeneous effects across these groups.

Disabled workers are identified using a work-limitation question from the March income supplement. Respondents are asked whether they have a health problem or disability that either prevents them from working or limits the kind or amount of work they can do. Those answering ``yes'' are coded as disabled, and those answering ``no'' are coded as nondisabled. This self-reported measure is standard in the disability literature and is similar to questions used in the PSID and SIPP.

For each survey year $t$, the income supplement refers to the previous calendar year. For example, the March 1988 survey reports weeks worked and annual earnings for 1987. As a result, the underlying outcomes cover calendar years 1987--1996, even though the survey years run from 1988 to 1997.

The key outcome variables used in the replication are:
\begin{itemize}
  \item \textbf{Weeks worked} (\texttt{WKSWORK}): number of weeks worked in the previous calendar year.
  \item \textbf{Annual wage and salary income} (\texttt{WSAL\_VAL}): total wage and salary earnings in the previous calendar year.
  \item \textbf{Weekly wage} (\texttt{WKWAGE}): constructed as annual wage and salary income divided by weeks worked, and then deflated to real 1988 dollars.
  \item \textbf{Log weekly wage} (\texttt{LNWKWAGE}): the natural logarithm of real weekly wage, defined for observations with positive weeks worked and positive annual wage and salary income.
\end{itemize}

In addition, the CPS provides:
\begin{itemize}
  \item Demographics: age (\texttt{AGE}), sex (\texttt{SEX}), race (\texttt{RACE}), education (\texttt{HG\_ST60}, \texttt{HSGRAD}, \texttt{SOMECO}, \texttt{COLGRAD}), marital status (\texttt{MARITAL}), and census region (\texttt{REGION}).
  \item Labor force status and work intensity: employment indicators (\texttt{WORKING}, \texttt{UNEMPL}, \texttt{NILF}), weeks worked (\texttt{WKSWORK}).
  \item Disability status and causes: disability indicators (\texttt{DISABL1}, \texttt{DISABL2}, \texttt{DISABL3}) and disability cause codes (\texttt{DIS\_SC1}, \texttt{DIS\_SC2}).
  \item Federal benefit receipt: Social Security (\texttt{SS\_YN}, \texttt{SS\_VAL}), Supplemental Security Income (\texttt{SSI\_YN}), and various veteran benefit types (\texttt{VET\_TYP1}--\texttt{VET\_TYP5}, \texttt{VET\_YN}, \texttt{VET\_QVA}).
  \item Sample weights: CPS final weights (\texttt{FNLWGT}, \texttt{MARSUPWT}, \texttt{FNLWGT2}).
\end{itemize}

In our replication, the raw CPS extract is stored in R as \texttt{marcps\_w}. From this raw file we construct a cleaned analysis dataset \texttt{one} that is designed to match, as closely as possible, the sample selection and variable definitions used in Acemoglu and Angrist (2001). The next subsection describes the cleaning and variable construction steps in detail.

% =========================
% ADDED: more paper-context on measurement
% =========================
\subsection{Measurement issues and why the paper uses multiple disability definitions}

A persistent challenge in disability research is that disability is not directly observed as a clinical construct; instead it is measured via survey responses that can reflect health status, expectations, stigma, and labor market opportunities. The work-limitation measure (\texttt{DISABL1}) may change over time even holding true health constant if social policy changes the incentives to report a limitation (e.g., in relation to benefit eligibility or perceived discrimination). This creates potential concerns about compositional shifts in who is classified as disabled around policy implementation.

For this reason, a major component of the paper’s credibility argument is that the negative post-ADA employment patterns appear under alternative disability measures as well (Table~4) and under additional empirical designs leveraging state variation (Tables~5--6). Even though our replication focuses primarily on Tables~2--4, it is important to understand that Tables~5--6 serve as an external validation layer that helps mitigate pure measurement-change explanations.

\subsection{Why weights matter and what weighted regressions estimate}

The CPS is a complex survey, and the paper uses CPS weights (notably \texttt{FNLWGT2}) to ensure that estimates approximate population-level moments. Weighted regression can be motivated as estimating parameters of a model for the population rather than the sample. In our R translation, we follow the SAS code by applying \texttt{FNLWGT2} as analytic weights in both summary statistics and regressions. This choice is important because disability prevalence and labor outcomes vary across demographic groups, and unweighted analyses can be sensitive to sampling variation or changes in composition across years.

\subsection{Construction of the cleaned dataset \texttt{one} from \texttt{marcps\_w}}

This subsection explains how the cleaned dataset \texttt{one} is constructed from the raw CPS extract \texttt{marcps\_w} using the R code provided earlier. The goal is to mirror the authors' sample selection and variable construction for Table 1 and subsequent regressions, while keeping the original CPS variable names whenever possible.

\subsubsection{Sample restriction}

We begin from the full CPS microdata in \texttt{marcps\_w} and impose the main age restriction from the paper:
\begin{itemize}
  \item Keep only individuals with $21 \leq \texttt{AGE} \leq 58$.
\end{itemize}
This yields a working-age sample with strong labor force attachment, consistent with the authors' description.

We also drop observations from odd calendar years at the end of the cleaning step, to match the authors' focus on even years in the descriptive analysis. In R, this is implemented via the condition \texttt{YEAR \%\% 2 == 0}.

\subsubsection{Wage and earnings variables}

Next, we construct the wage variables that appear in Table 1 and in the regressions:

\begin{enumerate}
  \item \textbf{Nominal weekly wage.} For individuals who worked strictly positive weeks (\texttt{WKSWORK > 0}), we define
  \[
    \texttt{WKWAGE} = \frac{\texttt{WSAL\_VAL}}{\texttt{WKSWORK}},
  \]
  and set \texttt{WKWAGE} to missing for everyone else. This matches the authors' definition of average weekly earnings based on annual wage and salary income and weeks worked.

  \item \textbf{Log weekly wage.} For individuals with positive weeks worked and positive annual wage and salary income, we define
  \[
    \texttt{LNWKWAGE} = \log\left(\frac{\texttt{WSAL\_VAL}}{\texttt{WKSWORK}}\right),
  \]
  and set \texttt{LNWKWAGE} to missing otherwise.

  \item \textbf{Total and job-specific wages.} For completeness, we carry over the total wage variable \texttt{TOTWAGE} as equal to \texttt{WSAL\_VAL}, and \texttt{JOBWAGE} equal to \texttt{ERN\_VAL}, following the original dataset structure.

  \item \textbf{Weight scaling.} The CPS weights \texttt{FNLWGT}, \texttt{MARSUPWT}, and \texttt{FNLWGT2} are divided by 100, matching the convention in the authors' SAS code. The rescaled \texttt{FNLWGT2} is later used as the primary analysis weight in summary statistics and regressions.
\end{enumerate}

\subsubsection{Age groups, race, and education}

To match the groupings in Table 1 and the regression controls, we construct categorical variables:

\begin{itemize}
  \item \textbf{Age groups.} We define a decade-specific age group
  \[
    \texttt{AGEGRP} = 10 \times \left\lfloor \frac{\texttt{AGE}}{10} \right\rfloor,
  \]
  and then create indicator variables \texttt{AGE20}, \texttt{AGE30}, \texttt{AGE40}, and \texttt{AGE50} for the corresponding 20s, 30s, 40s, and 50s age bands.

  \item \textbf{Young vs.\ older sample.} Following the paper, we define \texttt{SAMPLE = ``young''} if $\texttt{AGE} < 40$ and \texttt{SAMPLE = ``old''} otherwise. These two samples (21–39 vs.\ 40–58) correspond to the panels in Table 1.

  \item \textbf{Race.} We collapse race into three categories by coding \texttt{RACEGRP = 1} (white), \texttt{2} (black), or \texttt{3} (other). If the original CPS race code is 3 or above, we recode it to 3. We then define dummy variables \texttt{WHITE}, \texttt{BLACK}, and \texttt{OTHER} based on this collapsed coding.

  \item \textbf{Education.} We construct a post–high school indicator \texttt{POSTHS} that equals 1 if the respondent has some college or a college degree, i.e., if \texttt{SOMECO == 1} or \texttt{COLGRAD == 1}. We also carry over the original education dummies \texttt{HSGRAD}, \texttt{SOMECO}, and \texttt{COLGRAD} so that we can match the authors' education controls.
\end{itemize}

\subsubsection{Disability and benefit receipt}

Following the authors' focus on disability and federal transfers, we construct several disability and program participation indicators:

\begin{itemize}
  \item \textbf{Disability status.} The main work-limiting disability indicator is \texttt{DISABL1}, taken directly from the CPS supplement. We retain \texttt{DISABL2} and \texttt{DISABL3} as additional disability-related codes, matching the original data.

  \item \textbf{Social Security Disability Insurance (DI).} We construct a DI indicator \texttt{DI} that equals 1 if the annual Social Security benefit amount, converted to a weekly real amount, exceeds \$75 in 1988 dollars. Operationally:
  \[
    \texttt{DI} = 1\{\texttt{SS\_VAL} / (\texttt{CPIW} \times 52) > 75\}.
  \]

  \item \textbf{Old-age Social Security (OAS) and SSI.} We define \texttt{OAS = 1} if \texttt{SS\_YN == 1} and \texttt{DI == 0}, and \texttt{SSI = 1} if \texttt{SSI\_YN == 1}. The combined indicator \texttt{SSIORDI} equals 1 if either \texttt{SSI == 1} or \texttt{DI == 1}. The combined old-age and SSI indicator \texttt{OASDISSI} equals 1 if \texttt{SS\_YN == 1} or \texttt{SSI\_YN == 1}.

  \item \textbf{Other disability and veteran benefits.} We define \texttt{OTHERDIS = 1} if \texttt{DIS\_YN == 1}. We create a set of veteran benefit indicators: \texttt{VETCOMP}, \texttt{VETSURV}, \texttt{VETPENS}, \texttt{VETEDUC}, and \texttt{VETOTHR} from the corresponding \texttt{VET\_TYP1--VET\_TYP5} flags, as well as \texttt{VETQVA} (need-based VA benefits) and \texttt{ANYVA} (any VA benefit). We also construct \texttt{FGDI}, \texttt{MILD I}, and \texttt{USRRDI} from the disability cause codes \texttt{DIS\_SC1} and \texttt{DIS\_SC2} to capture other federal disability-related programs.

  \item \textbf{Means-tested and ``any federal'' indicators.} We define \texttt{OTHERFED = 1} if the individual receives any of \texttt{FGDI}, \texttt{MILD I}, \texttt{USRRDI}, or AFDC (here set to zero in the raw data). We define \texttt{ANYFED = 1} if the individual receives either \texttt{OASDISSI}, any VA benefit (\texttt{ANYVA}), or other federal benefits (\texttt{OTHERFED}). Finally, we define a means-tested indicator \texttt{MEANSTST = 1} if the individual receives either \texttt{OASDISSI}, VA benefits that are explicitly means-tested (\texttt{ANYVA == 1 \& VETQVA == 1}), or AFDC.
\end{itemize}

These variables allow us to replicate the authors' summary of disability and transfer receipt patterns and to control for program participation in later analyses.

\subsubsection{CPI deflation and outlier trimming}

To express wages in constant dollars and to trim implausible observations, we construct a CPI-W index and deflate weekly wages:

\begin{enumerate}
  \item \textbf{CPI-W index.} We define a year-specific CPI-W index \texttt{CPIW} for each calendar year in the sample (1988--1997) and normalize it so that 1988 has value 117. The index is then divided by 117 to obtain a factor that converts nominal amounts into 1988 dollars.

  \item \textbf{Real weekly wage.} We construct a real weekly wage
  \[
    \texttt{RLWKWAGE} = \frac{\texttt{WKWAGE}}{\texttt{CPIW}},
  \]
  and correspondingly deflate \texttt{WKWAGE} itself by \texttt{CPIW}. The log weekly wage \texttt{LNWKWAGE} is interpreted as the log of this real weekly wage for non-missing values.

  \item \textbf{Outlier trimming.} Following the authors' cleaning rules (as reflected in their SAS code), we treat weekly wages below \$25 and above \$2000 (in real 1988 dollars) as implausible. For observations with $\texttt{RLWKWAGE} < 25$ or $\texttt{RLWKWAGE} > 2000$, we set both \texttt{LNWKWAGE} and \texttt{WKWAGE} to missing. This removes extremely low or high wage values that could distort means and regressions.
\end{enumerate}

\subsubsection{Additional covariates and trends}

Finally, we construct a set of additional covariates and time-structure variables used in the regression models:

\begin{itemize}
  \item \textbf{Marital status dummies:} \texttt{MARRIED}, \texttt{WIDOWED}, and \texttt{DIVSEP} derived from \texttt{MARITAL}.
  \item \textbf{Veteran status:} \texttt{VETERAN}, \texttt{VIETSERV}, \texttt{KORASERV}, and \texttt{OTHRSERV} derived from \texttt{VET}.
  \item \textbf{Age and trend terms:} quadratic age (\texttt{AGE2}), a linear time trend \texttt{TREND = YEAR - 87}, and its square \texttt{TREND2 = TREND\^2}. We also construct interaction terms between disability status and year or trend, such as \texttt{DIS\_YR92}, \texttt{DIS\_YR93}, \dots, and \texttt{TREND\_D = TREND * DISABL1}.
  \item \textbf{Year dummies:} \texttt{YR89}, \texttt{YR90}, \dots, \texttt{YR97}, indicating each survey year.
  \item \textbf{Region indicators:} \texttt{SOUTH} and \texttt{WEST}, based on the census region variable \texttt{REGION}.
\end{itemize}

After all these steps, we retain the variables needed for Table 1 and the baseline regressions (age, race, education, disability status, weeks worked, wages, benefit indicators, and weights) and restrict the dataset to even years. The resulting cleaned dataset, which we denote by \texttt{one}, is the starting point for our replication of the descriptive statistics and regression analyses in Acemoglu and Angrist (2001).

In the next part of the project (not shown here), we use \texttt{one} to compute weighted means of key variables by disability status, sex, age group, and year, and to replicate the structure of Table 1 in the original paper.

% ============================================================
% ADDED: A full identification/estimation section to lengthen review
% ============================================================
\section{Empirical strategy and identification in detail}

This section expands the mathematical structure of the paper’s difference-in-differences/event-study approach. The ADA is modeled as a policy shock whose effects begin in the early 1990s (especially around 1992). The strategy compares disabled and nondisabled individuals over time, controlling for rich covariates and allowing flexible time-varying composition effects by interacting demographic categories with year indicators.

\subsection{Event-study difference-in-differences specification}

Let $D_i$ be an indicator for disability status and let $\mathbb{1}\{t=\tau\}$ be a year indicator. The paper’s event-study style design can be written (abstracting from weights) as
\begin{equation}
Y_{it} = \underbrace{\sum_{\tau}\pi_{\tau}\mathbb{1}\{t=\tau\}}_{\text{year effects}}
+ \underbrace{\gamma D_i}_{\text{disability main effect}}
+ \underbrace{\sum_{\tau}\alpha_{\tau}(D_i\cdot \mathbb{1}\{t=\tau\})}_{\text{disability-by-year effects}}
+ \underbrace{g(X_i,t)}_{\text{controls, flexibly by year}}
+ \varepsilon_{it}.
\end{equation}
In the SAS implementation, $g(X_i,t)$ is constructed to be very flexible: the authors include categorical controls (age-group, race-group, education-group, region) and also include interactions between each category and year. This is equivalent to allowing the effect of demographic composition to vary freely over time, which helps absorb differential secular trends across groups unrelated to the ADA.

In practice, the coefficients of interest are $\alpha_{\tau}$ for post-ADA years $\tau \in \{92,93,\dots\}$ relative to omitted baseline years. A negative $\alpha_{\tau}$ in the weeks-worked regression indicates that disabled individuals’ weeks worked declined relative to nondisabled individuals in that year.

\subsection{Parallel trends and interpretability}

The difference-in-differences interpretation requires that, absent the ADA, the disabled and nondisabled groups would have followed parallel trends in outcomes after conditioning on $g(X_i,t)$. Formally, one can state a conditional parallel trends condition:
\[
\mathbb{E}[Y_{it}(0)-Y_{is}(0)\mid D_i=1, X_i] = \mathbb{E}[Y_{it}(0)-Y_{is}(0)\mid D_i=0, X_i]
\]
for relevant pre- and post-policy years $s,t$. The event-study coefficients in pre-policy years (placebo leads) are informative: if they are close to zero, it supports (though does not prove) parallel trends. The paper’s emphasis on multiple years and robustness checks is consistent with addressing this concern.

\subsection{Trend-augmented specifications and what ``trend'' means}

Some specifications add a linear time trend and an interaction between the trend and disability status. This can be written as
\begin{equation}
Y_{it} = \cdots + \lambda \cdot \text{TREND}_t + \theta \cdot (D_i\cdot \text{TREND}_t) + \sum_{\tau \ge 92}\alpha_{\tau}(D_i\cdot \mathbb{1}\{t=\tau\}) + \varepsilon_{it}.
\end{equation}
Here $\text{TREND}_t$ is typically defined as $t-87$ in the SAS code (so it is zero around 1987). The interaction term $D_i\cdot \text{TREND}_t$ allows disabled individuals to have a different linear secular trend than nondisabled individuals. The coefficient $\theta$ captures the relative trend slope for disabled individuals. Including this term is a robustness device: if disabled workers were already on a different trajectory before the ADA, the trend interaction can partially adjust for that, and the remaining post-ADA event-study coefficients can be interpreted as deviations from that pre-existing trend.

\subsection{Weighted least squares interpretation}

The SAS code uses analytic weights. In our replication and reanalysis, the weighted regression solves
\[
\hat\beta = \arg\min_{\beta}\sum_i w_i (Y_i - X_i^\top \beta)^2,
\]
where $w_i$ is the CPS weight (or the CPS weight times an IPW factor). These weights are important for representativeness and for matching the original empirical results as closely as possible.

\section{Replication of the main empirical results}
\label{sec:mainresults}

The central empirical results in Acemoglu and Angrist (2001) evaluate how the labor market outcomes of disabled individuals changed following the implementation of the Americans with Disabilities Act (ADA). The ADA, which took effect in the early 1990s, imposed new accommodation requirements and increased potential legal costs for employers. These changes may have altered firms' incentives to hire, retain, or adjust the wages of disabled workers. To quantify these effects, the authors estimate a series of reduced-form models in which weeks worked or log weekly wages are regressed on disability status, year effects, and disability--year interactions, along with standard demographic controls. The coefficients on the disability--year interactions capture the relative change in outcomes for disabled individuals after the ADA compared with nondisabled individuals.

Although the paper includes several descriptive tables and graphical displays, the core causal findings are contained in two main regression tables: Table~2 and Table~3. Table~1, which we replicated earlier, serves as a diagnostic summary of the CPS sample and verifies that our cleaned dataset reproduces the distributional characteristics of the original study. However, Table~1 is not part of the paper's identification strategy. The authors' principal conclusions regarding the effects of the ADA are based exclusively on the regression estimates presented in Tables~2 and~3, making these two tables the essential targets for replication.

Table~2 reports the estimated effects of the ADA on employment, where the outcome is weeks worked in the previous calendar year. The disability--year interactions measure how the labor supply of disabled workers evolved relative to nondisabled workers after the ADA. The original paper finds substantial reductions in employment for disabled individuals, particularly for younger men (ages 21--39). These negative employment effects appear consistently across specifications, suggesting that the ADA increased the cost of employing disabled workers without generating offsetting employment gains.

Table~3 presents the corresponding wage regressions, where the outcome is log weekly earnings. If the ADA improved bargaining power or reduced wage discrimination, we might expect to see increases in wages for disabled workers. However, the estimates in Table~3 show little evidence of compensating wage growth. Most coefficients are small in magnitude and statistically insignificant. Combined with the declines in employment documented in Table~2, these results support the interpretation that the ADA primarily increased employment costs rather than improving earnings prospects for disabled workers.

Other empirical elements in the paper—including interaction plots, robustness checks, and subgroup analyses—are useful for illustration but do not form the basis of the authors' main causal conclusions. Because the objective of this replication is to reproduce the key empirical findings that drive the paper's policy interpretation, we focus exclusively on replicating Tables~2 and~3. Together, these tables provide the complete set of reduced-form regression estimates needed to evaluate whether the ADA decreased employment among disabled individuals and whether any wage effects accompanied those employment changes. The next section describes the estimation procedures and presents our replicated results.

% =========================
% ADDED: deeper reading and interpretation of Tables 2--3
% =========================
\subsection{Interpreting Table 2 coefficients as an event-study path of employment effects}

In Table~2, the outcome is \texttt{WKSWORK}. The regressors include year indicators, demographic categories, year-by-demographic interactions, and disability-by-year interactions. For a given post-ADA year (e.g., 1994), the coefficient on $\texttt{DIS\_YR94}$ can be interpreted as the change in weeks worked for disabled individuals in 1994 relative to nondisabled individuals in 1994, netting out (i) overall year shocks that affect everyone and (ii) demographic composition effects that are allowed to vary across years.

A key feature of Table~2 is that the coefficients become more negative in the mid-1990s. This pattern is consistent with a dynamic adjustment process: compliance and enforcement intensity may rise over time, firms may learn and adjust hiring policies gradually, and litigation risk may not be fully capitalized immediately in 1992. A strictly mechanical ``policy on/off'' model would predict a discrete break; the observed gradual deepening is more consistent with evolving enforcement and employer behavior.

\subsection{Interpreting Table 3: Alternative Employment Specifications}

Table~3 reports alternative estimates of the effect of the Americans with Disabilities Act on employment, where the dependent variable in all columns is \texttt{WKSWORK} (weeks worked in the previous calendar year). Unlike Table~2, which presents a single baseline event-study specification, Table~3 is explicitly designed to assess whether the estimated post-ADA decline in employment among disabled individuals is sensitive to modeling choices, control sets, or functional form assumptions.

Formally, all specifications in Table~3 estimate regressions of the form
\[
Y_{it}
=
\delta D_i
+
\sum_{t}\alpha_t (D_i \times \mathbb{1}\{t\})
+
h_t(X_i)
+
\varepsilon_{it},
\]
where $Y_{it}$ denotes weeks worked, $D_i$ is an indicator for disability status, and $h_t(X_i)$ represents a set of controls whose structure varies across columns. The coefficients of interest are the disability main effect and the disability-by-year interactions, which measure how disabled workers’ employment differs from that of nondisabled workers over time.

\paragraph{Column (1): Baseline specification.}
Column (1) corresponds to the paper’s preferred baseline regression. It includes year fixed effects, disability status, and disability-by-year interactions, along with a rich set of demographic controls (age group, race, education, and region) and interactions between these controls and year indicators. Mathematically, this specification allows the employment outcomes of different demographic groups to follow flexible, group-specific time paths, while identifying the ADA effect from deviations in disabled workers’ employment relative to nondisabled workers within these groups.

The estimates in column (1) show a large and negative disability main effect and increasingly negative disability-by-year coefficients in the post-ADA period. This indicates that, relative to nondisabled workers, disabled individuals experience a substantial and growing reduction in weeks worked after the early 1990s.

\paragraph{Column (2): No controls.}
Column (2) removes the demographic control variables and their year interactions, leaving only disability status, year indicators, and disability-by-year interactions. In this case, the identifying variation comes purely from raw differences in employment trends between disabled and nondisabled individuals over time.

The fact that the post-ADA disability-by-year coefficients remain negative and of similar magnitude to those in column (1) implies that the employment decline is not driven by changes in observable demographic composition. Even highlighting raw comparisons, disabled workers’ employment falls sharply relative to nondisabled workers after the ADA.

\paragraph{Column (3): Regression controls only.}
Column (3) reintroduces demographic controls but excludes the full set of year-by-demographic interactions used in the baseline specification. In effect, this column imposes a more restrictive functional form, assuming that observable characteristics affect employment in a stable way over time.

Despite this restriction, the post-ADA disability coefficients remain negative and economically meaningful. This shows that the estimated employment effects are not an artifact of the highly flexible interaction structure used in the baseline model.

\paragraph{Interpretation across columns.}
The central message of Table~3 is that the negative post-ADA employment effects are remarkably stable across specifications. Whether one allows for flexible demographic trends, omits controls entirely, or imposes stronger parametric structure, disabled workers experience a substantial decline in weeks worked relative to nondisabled workers after the ADA.

This robustness matters for identification. If the results were driven by specification choice, we would expect large changes in magnitude or sign across columns. Instead, the persistence of negative estimates across all specifications strengthens the interpretation that the ADA increased the cost of employing disabled workers, leading to reduced labor demand and lower employment.

\paragraph{Connection to the paper’s main argument.}
In the context of the paper’s broader analysis, Table~3 serves as a specification-robustness check for the core finding of declining disabled employment. Together with the baseline estimates in Table~2 and the alternative disability definitions explored elsewhere in the paper, Table~3 supports the conclusion that the employment effects of the ADA are not a statistical artifact, but a robust empirical pattern consistent with increased accommodation and litigation costs faced by employers.

\section{Robustness Checks}

The primary results of Acemoglu and Angrist (2001), presented in Tables~2 and~3, indicate that the Americans with Disabilities Act (ADA) led to a decline in employment among disabled workers. Because these estimates rely on a difference-in-differences comparison between disabled and nondisabled individuals, the authors devote substantial attention to assessing whether the results are sensitive to alternative specifications or sample constructions. In this section, we replicate and interpret the robustness checks reported in Table~4 of the original paper.

Contrary to a common misconception, Table~4 does not introduce entirely new clinical or functional definitions of disability. Instead, it examines whether the estimated employment effects are sensitive to alternative ways of handling disability-related program participation and underlying trends. In particular, Table~4 focuses on whether the baseline results are driven by compositional changes associated with participation in federal disability transfer programs, such as Social Security Disability Insurance (DI) and Supplemental Security Income (SSI), or by pre-existing differential trends between disabled and nondisabled workers.

\subsection{Structure and interpretation of Table~4}

Table~4 reports estimates from regressions in which the dependent variable is \emph{weeks worked}, using the same basic event-study difference-in-differences framework as in Table~2. The table is organized into three columns, each corresponding to a different robustness exercise applied to the baseline specification.

\paragraph{Column (1): Excluding SSI and DI recipients.}
Column~(1) re-estimates the baseline employment regression after excluding individuals who receive SSI or DI benefits. The motivation is to address the concern that the post-ADA decline in employment among disabled workers could be mechanically driven by changes in disability program participation rather than by employer responses to the ADA. If the main results were driven primarily by increased reliance on transfer programs, then excluding SSI and DI recipients should substantially weaken or eliminate the estimated employment effects. Instead, the estimates in Column~(1) remain negative and similar in magnitude to the baseline results, suggesting that the employment decline is not driven solely by transfer-program participation.

\paragraph{Column (2): Allowing for disability-specific time trends.}
Column~(2) adds a linear time trend and an interaction between the trend and disability status. This specification allows disabled workers to follow a different secular employment trajectory than nondisabled workers even in the absence of the ADA. The purpose of this column is to assess whether the post-ADA employment declines reflect a continuation of pre-existing trends rather than a policy-induced break. The persistence of negative post-ADA coefficients in this specification indicates that the estimated employment effects are not simply extrapolations of earlier downward trends among disabled workers.

\paragraph{Column (3): Controlling directly for SSI/DI receipt.}
Column~(3) reintroduces individuals receiving SSI or DI but includes an explicit control for SSI/DI participation in the regression. This approach addresses the same concern as Column~(1) but does so by conditioning on program receipt rather than excluding recipients from the sample. The similarity of the estimates in Column~(3) to those in the baseline specification further supports the conclusion that the main results are not driven by changes in disability benefit participation.

\subsection{What Table~4 establishes and what it does not}

Taken together, the results in Table~4 demonstrate that the negative post-ADA employment effects documented in Tables~2 and~3 are robust to alternative treatments of disability-related transfer programs and to the inclusion of disability-specific time trends. This strengthens the interpretation that the observed employment declines reflect employer responses to the ADA—such as accommodation costs or increased expected firing costs—rather than compositional changes in the disabled population or differential secular trends.

At the same time, Table~4 does not resolve all potential concerns. In particular, it does not address the possibility that disabled and nondisabled workers may be differentially affected by broader macroeconomic shocks or regional labor market conditions. For this reason, the authors complement Table~4 with additional evidence exploiting cross-state variation in ADA enforcement intensity and pre-existing legal environments (reported in Tables~5 and~6). While we do not replicate those tables in this project, they serve as an additional layer of validation for the paper’s central conclusions.

\subsection*{Additional robustness evidence in the original paper (Tables 5 and 6, not replicated here)}

Beyond Table~4, Acemoglu and Angrist (2001) also present further evidence using variation in \emph{state-level ADA charge activity} (EEOC charge rates) as an additional source of cross-state heterogeneity in the intensity of the ADA as ``experienced'' by employers. In particular, Table~5 reports OLS estimates of the relationship between weeks worked and state ADA charge rates, estimated separately by disability status; Table~6 reports both OLS and IV (2SLS) versions of related specifications using interactions between post-ADA year dummies and indicators for states with strong pre-ADA anti-discrimination (FEP) statutes as instruments.

We do \emph{not} replicate Tables~5 and~6 in this project for two practical reasons: (i) they require merging CPS microdata with a separate panel of state-by-year charge rates and state legal environment measures (FEP statute indicators), and (ii) the identification strategy in Tables~5--6 differs from the individual-level event-study DiD that forms the paper's core results. Nonetheless, the qualitative message from Tables~5 and~6 is broadly consistent with the main findings: the paper reports that the IV estimates show a pattern similar to the OLS estimates and provide some evidence that states where the ADA was more of an ``innovation'' experienced steeper declines in disabled employment than other states. While we do not reproduce these results here, they are best interpreted as a complementary robustness/validation exercise that checks whether cross-state differences in enforcement intensity line up with the individual-level declines documented in Tables~2--4.

\section{Reanalysis Using Modern Causal Estimators}

The baseline employment results in Acemoglu and Angrist (2001) are obtained using a richly controlled difference-in-differences regression. As discussed above, this specification is mathematically equivalent to a regression-adjustment (RA) estimator. Re-estimating this model on our reconstructed dataset reproduces the paper’s main findings: employment among disabled workers declines in the post-ADA period, with effects growing in magnitude throughout the mid-1990s.

To assess the robustness of these conclusions, we reanalyze the data using inverse probability weighting (IPW), a method not employed in the original study. Given the pronounced heterogeneity in employment responses by age and sex emphasized in the original paper, we conduct the IPW reanalysis separately for four demographic groups: men aged 21--39, women aged 21--39, men aged 40--58, and women aged 40--58. Within each subgroup, propensity scores are estimated using pre-ADA data (1988--1991), conditioning on demographic characteristics including age group, race, education, region, and metropolitan status. These scores are used to construct stabilized weights that rebalance observable covariates between the disabled and non-disabled within each subgroup.

We then estimate the same event-study difference-in-differences specification as in the original paper on the reweighted samples, treating 1992 as a transition year and defining post-ADA effects as beginning in 1993. These patterns closely mirror the baseline difference-in-differences estimates reported in Table 3, Column (1) of Acemoglu and Angrist (2001). Across all four subgroups, the IPW estimates yield negative post-ADA employment effects that are similar in sign, timing, and relative magnitude to the original regression-adjusted results (see Appendix F for the analysis code and numerical results). In particular, employment declines emerge beginning in the mid-1990s and are largest and most persistent for men aged 21–39, with smaller and less stable effects for older individuals. While point estimates differ somewhat in magnitude across specifications and subgroups, the overall qualitative pattern remains highly consistent.

Taken together, these results indicate that the paper’s central conclusion—that the ADA was associated with a decline in employment among disabled workers—is robust to alternative weighting schemes and modern causal inference methods.

% =========================
% ADDED: full math explanation of IPW (to lengthen and align with class)
% =========================
\subsection{Mathematical details: IPW, stabilized weights, and balance}

Let $T_i = D_i$ denote the ``treatment'' indicator for disability status (treated = disabled). Let $X_i$ denote observed covariates such as age group, race group, education group, region, and metropolitan status. Define the propensity score
\[
e(X_i) = \Pr(T_i = 1 \mid X_i).
\]
Inverse probability weighting constructs weights that create a pseudo-population in which $T_i$ is independent of $X_i$ in expectation. The canonical IPW weights for the average treatment effect (ATE) are
\[
w_i^{ATE} = \frac{T_i}{e(X_i)} + \frac{1 - T_i}{1 - e(X_i)}.
\]
In practice, these weights can be unstable when $e(X_i)$ is close to zero or one. Stabilized weights reduce variance by multiplying by marginal treatment probabilities:
\[
w_i^{SW} = \frac{\Pr(T = 1)}{e(X_i)} T_i + \frac{\Pr(T = 0)}{1 - e(X_i)} (1 - T_i).
\]

In our implementation, propensity scores are estimated using pre-ADA data (1988--1991) within each demographic subgroup to avoid contaminating the propensity model with post-ADA behavioral responses and to avoid extrapolation across age or sex groups. Stabilized IPW weights are then constructed within each subgroup and multiplied by the CPS survey weight to obtain a final analysis weight,
\[
W_i = \texttt{FNLWGT2}_i \cdot w_i^{SW}.
\]

Under standard unconfoundedness assumptions for disability conditional on $X$ (which is a strong assumption and is used here as a robustness exercise rather than as the primary identification strategy), IPW can be used to estimate causal contrasts. In our context, IPW is employed primarily to rebalance observable covariates between disabled and non-disabled individuals within each subgroup, after which we re-estimate the same event-study difference-in-differences regression. The conceptual test is that if the estimated post-ADA employment differences persist after reweighting, then imbalance in observable characteristics is unlikely to be the sole driver of the results.

\subsection{IPW-weighted event-study reanalysis}

In addition to the baseline regression-adjustment specification, we estimate IPW-weighted event-study regressions using the stabilized weights described above. While this approach does not formally satisfy the conditions for double robustness in the event-study setting, it combines reweighting and regression-based adjustment in a manner that is standard in modern empirical practice. These estimates give  an additional robustness check to the paper's purely regression-based approach.

% ============================================================
% APPENDIX (CODE)
% ============================================================
\clearpage
\appendix
\section*{Appendix: Replication and Reanalysis Code}
\addcontentsline{toc}{section}{Appendix: Replication and Reanalysis Code}

\subsection{Data cleaning: \texttt{marcps\_w} $\to$ \texttt{one}}
\label{app:cleaning}

This appendix corresponds to the construction steps described in Section 2.2.
The code below constructs \texttt{one} from the raw CPS extract \texttt{marcps\_w}, keeping raw-variable names in capitals and creating analysis variables consistent with the SAS code.

\begin{lstlisting}[language=R]
############################################################
## Appendix A: Data cleaning (marcps_w -> one)
## Raw CPS variables are CAPITALIZED.
## Objects we create (one, etc.) are lower-case.
############################################################

library(dplyr)
library(stringr)

# Helper: CPI-W values used in the SAS code (1988-1997 calendar years)
cpiw_map <- tibble::tibble(
  YEAR = 88:97,
  CPIW = c(117.0, 122.6, 129.0, 134.3, 138.2, 142.1, 145.6, 149.8, 154.1, 157.6)
)

# IMPORTANT ASSUMPTION:
# marcps_w is already loaded in your R session and contains CPS variables in CAPITALS.

one <- marcps_w %>%
  # Sample restriction: age 21-58
  filter(AGE >= 21, AGE <= 58) %>%

  # Young/old sample split
  mutate(
    SAMPLE = ifelse(AGE < 40, "young", "old")
  ) %>%

  # Wage construction: only defined when weeks worked > 0 and WSAL_VAL > 0
  mutate(
    LNWKWAGE = ifelse(WKSWORK > 0 & WSAL_VAL > 0, log(WSAL_VAL / WKSWORK), NA_real_),
    WKWAGE   = ifelse(WKSWORK > 0 & WSAL_VAL > 0, WSAL_VAL / WKSWORK, NA_real_),
    TOTWAGE  = WSAL_VAL,
    JOBWAGE  = ERN_VAL
  ) %>%

  # Age group and dummies
  mutate(
    AGEGRP = 10 * floor(AGE / 10),
    AGE20  = as.integer(AGEGRP == 20),
    AGE30  = as.integer(AGEGRP == 30),
    AGE40  = as.integer(AGEGRP == 40),
    AGE50  = as.integer(AGEGRP == 50)
  ) %>%

  # Race group collapse: 1,2,3+
  mutate(
    RACEGRP = ifelse(RACE >= 3, 3L, as.integer(RACE))
  ) %>%

  # Education group: 1 lesshs, 2 hsgrad, 3 someco or colgrad
  mutate(
    EDUCGRP = dplyr::case_when(
      LESSHS == 1 ~ 1L,
      HSGRAD == 1 ~ 2L,
      (SOMECO == 1 | COLGRAD == 1) ~ 3L,
      TRUE ~ NA_integer_
    )
  ) %>%

  # Work last year indicator
  mutate(
    WORKLY = as.integer(WKSWORK > 0)
  ) %>%

  # Labor force indicators used in SAS (kept for completeness)
  mutate(
    LFIN1  = ifelse(WKSWORK == 0, WORKING, NA_real_),
    LFIN2  = ifelse(WKSWORK < 50, WORKING, NA_real_),
    LFOUT1 = ifelse(WKSWORK >= 50, (1 - WORKING), NA_real_),
    CHANGER = ifelse(WKSWORK == 0, NA_real_, NA_real_)  # matches SAS: changer=. when wkswork=0
  ) %>%

  # Trend and disability-year interactions (event-study style)
  mutate(
    TREND  = YEAR - 87,
    TREND2 = TREND^2,
    DIS_TREND = TREND * DISABL1,

    DIS_YR89 = as.integer(YEAR == 89) * DISABL1,
    DIS_YR90 = as.integer(YEAR == 90) * DISABL1,
    DIS_YR91 = as.integer(YEAR == 91) * DISABL1,
    DIS_YR92 = as.integer(YEAR == 92) * DISABL1,
    DIS_YR93 = as.integer(YEAR == 93) * DISABL1,
    DIS_YR94 = as.integer(YEAR == 94) * DISABL1,
    DIS_YR95 = as.integer(YEAR == 95) * DISABL1,
    DIS_YR96 = as.integer(YEAR == 96) * DISABL1,
    DIS_YR97 = as.integer(YEAR == 97) * DISABL1,

    DYR_9497 = as.integer(YEAR >= 94 & YEAR <= 97) * DISABL1
  ) %>%

  # Merge CPI-W and create real wage + trimming rule
  left_join(cpiw_map, by = "YEAR") %>%
  mutate(
    CPIW88 = CPIW / 117.0,
    RLWKWAGE = WKWAGE / CPIW88
  ) %>%
  mutate(
    # "kill wage outliers" rule: if real weekly wage < 25 or > 2000 -> set wages missing
    LNWKWAGE = ifelse(!is.na(RLWKWAGE) & (RLWKWAGE < 25 | RLWKWAGE > 2000), NA_real_, LNWKWAGE),
    WKWAGE   = ifelse(!is.na(RLWKWAGE) & (RLWKWAGE < 25 | RLWKWAGE > 2000), NA_real_, WKWAGE)
  ) %>%

  # Weight scaling (SAS code implicitly scales weights /100 in later steps)
  mutate(
    FNLWGT  = FNLWGT  / 100,
    MARSUPWT = MARSUPWT / 100,
    FNLWGT2 = FNLWGT2 / 100
  ) %>%

  # Optional: restrict to even years if that is what you used for Table 1
  filter(YEAR %% 2 == 0)

############################################################
\end{lstlisting}

\subsection{Replication of Table 1-style summary statistics}
\label{app:table1}

\begin{lstlisting}[language=R]
############################################################
## Appendix B: Table 1-style summary statistics
############################################################

library(dplyr)
library(tidyr)
library(Hmisc)

# Weighted median and weighted quantiles helper
w_quantile <- function(x, w, probs) {
  ok <- !is.na(x) & !is.na(w)
  x <- x[ok]; w <- w[ok]
  if (length(x) == 0) return(rep(NA_real_, length(probs)))
  Hmisc::wtd.quantile(x, weights = w, probs = probs, na.rm = TRUE)
}

summ_one_group <- function(df, var, wvar = "FNLWGT2") {
  x <- df[[var]]
  w <- df[[wvar]]
  qs <- w_quantile(x, w, probs = c(0.25, 0.5, 0.75))
  tibble::tibble(
    variable = var,
    mean  = Hmisc::wtd.mean(x, weights = w, na.rm = TRUE),
    median = qs[2],
    q25 = qs[1],
    q75 = qs[3],
    iqr = qs[3] - qs[1],
    n_nonmiss = sum(!is.na(x))
  )
}

vars_table1 <- c(
  "WKSWORK", "LNWKWAGE", "WKWAGE",
  "DISABL1", "AGE", "AGEGRP", "RACEGRP", "EDUCGRP",
  "WORKING", "UNEMPL", "NILF"
)

table1_stats <- one %>%
  mutate(
    DISABLED = as.integer(DISABL1 == 1),
    SEX_GRP  = dplyr::case_when(SEX == 1 ~ "Men", SEX == 2 ~ "Women", TRUE ~ "Other")
  ) %>%
  group_by(SEX_GRP, SAMPLE, DISABLED) %>%
  group_modify(\(.x, .y) {
    dplyr::bind_rows(lapply(vars_table1, \(v) summ_one_group(.x, v)))
  }) %>%
  ungroup()

print(table1_stats)
############################################################
\end{lstlisting}

\subsection{Replication of Table 2 (Weeks worked / baseline DiD event-study)}
\label{app:table2}

\begin{lstlisting}[language=R]
############################################################
## Appendix C: Table 2 replication (Weeks worked)
############################################################

library(fixest)
library(dplyr)

run_table2 <- function(df, sex_value) {
  df_sub <- df %>% filter(SEX == sex_value)

  m_wks <- feols(
    WKSWORK ~
      i(YEAR) +
      i(AGEGRP) + i(RACEGRP) + i(EDUCGRP) + i(REGION) +
      i(YEAR, AGEGRP) + i(YEAR, RACEGRP) + i(YEAR, EDUCGRP) + i(YEAR, REGION) +
      DISABL1 + DIS_YR89 + DIS_YR90 + DIS_YR91 + DIS_YR92 + DIS_YR93 + DIS_YR94 + DIS_YR95 + DIS_YR96 + DIS_YR97
    | 0,
    weights = ~FNLWGT2,
    data = df_sub
  )

  m_lnw <- feols(
    LNWKWAGE ~
      i(YEAR) +
      i(AGEGRP) + i(RACEGRP) + i(EDUCGRP) + i(REGION) +
      i(YEAR, AGEGRP) + i(YEAR, RACEGRP) + i(YEAR, EDUCGRP) + i(YEAR, REGION) +
      DISABL1 + DIS_YR89 + DIS_YR90 + DIS_YR91 + DIS_YR92 + DIS_YR93 + DIS_YR94 + DIS_YR95 + DIS_YR96 + DIS_YR97
    | 0,
    weights = ~FNLWGT2,
    data = df_sub
  )

  list(wkswork = m_wks, lnwkwage = m_lnw)
}

table2_men_young <- run_table2(one %>% filter(SAMPLE == "young"), sex_value = 1)
table2_men_old   <- run_table2(one %>% filter(SAMPLE == "old"),   sex_value = 1)
table2_women_young <- run_table2(one %>% filter(SAMPLE == "young"), sex_value = 2)
table2_women_old   <- run_table2(one %>% filter(SAMPLE == "old"),   sex_value = 2)

etable(
  table2_men_young$wkswork, table2_men_old$wkswork, table2_women_young$wkswork, table2_women_old$wkswork,
  se = "standard",
  dict = c(
    "DIS_YR92"="Disability#1992",
    "DIS_YR93"="Disability#1993",
    "DIS_YR94"="Disability#1994",
    "DIS_YR95"="Disability#1995",
    "DIS_YR96"="Disability#1996",
    "DIS_YR97"="Disability#1997"
  )
)
############################################################
\end{lstlisting}

\subsection{Replication of Table 3 (Log weekly earnings / trend vs no-trend)}
\label{app:table3}

\begin{lstlisting}[language=R]
############################################################
## Appendix D: Table 3 replication (Log weekly earnings)
############################################################

library(fixest)
library(dplyr)

run_table3 <- function(df, sex_value, include_trend = FALSE) {
  df_sub <- df %>% filter(SEX == sex_value)

  rhs_core <- "
    i(YEAR) +
    i(AGEGRP) + i(RACEGRP) + i(EDUCGRP) + i(REGION) +
    i(YEAR, AGEGRP) + i(YEAR, RACEGRP) + i(YEAR, EDUCGRP) + i(YEAR, REGION) +
    DISABL1 + DIS_YR92 + DIS_YR93 + DIS_YR94 + DIS_YR95 + DIS_YR96 + DIS_YR97
  "

  rhs_trend <- "
    + TREND + DIS_TREND
  "

  fml <- as.formula(
    paste0("LNWKWAGE ~ ", rhs_core, if (include_trend) rhs_trend else "", " | 0")
  )

  feols(
    fml,
    weights = ~FNLWGT2,
    data = df_sub
  )
}

t3_men_young_notrend <- run_table3(one %>% filter(SAMPLE=="young"), 1, include_trend = FALSE)
t3_men_young_trend   <- run_table3(one %>% filter(SAMPLE=="young"), 1, include_trend = TRUE)

t3_men_old_notrend   <- run_table3(one %>% filter(SAMPLE=="old"), 1, include_trend = FALSE)
t3_men_old_trend     <- run_table3(one %>% filter(SAMPLE=="old"), 1, include_trend = TRUE)

t3_women_young_notrend <- run_table3(one %>% filter(SAMPLE=="young"), 2, include_trend = FALSE)
t3_women_young_trend   <- run_table3(one %>% filter(SAMPLE=="young"), 2, include_trend = TRUE)

etable(
  t3_men_young_notrend, t3_men_young_trend,
  t3_men_old_notrend,   t3_men_old_trend,
  t3_women_young_notrend, t3_women_young_trend,
  se = "standard"
)
############################################################
\end{lstlisting}

\subsection{Replication of Table 4 (Robustness checks)}
\label{app:table4}

\begin{lstlisting}[language=R]
############################################################
## Appendix E: Table 4 replication (robustness)
############################################################

library(fixest)
library(dplyr)

one_t4 <- one %>%
  mutate(
    DI = as.integer((SS_VAL / (CPIW * 52)) > 75),
    OAS = as.integer((SS_YN == 1) & (DI == 0)),
    SSI = as.integer(SSI_YN == 1),
    SSIORDI = as.integer((SSI_YN == 1) | (DI == 1)),
    OASDISSI = as.integer((SS_YN == 1) | (SSI_YN == 1))
  )

run_t4_col1 <- function(df, sex_value, sample_restrict = NULL) {
  d <- df %>% filter(SEX == sex_value, OASDISSI == 0)
  if (!is.null(sample_restrict)) d <- d %>% filter(SAMPLE == sample_restrict)

  feols(
    WKSWORK ~
      i(YEAR) +
      i(AGEGRP) + i(RACEGRP) + i(EDUCGRP) + i(REGION) +
      i(YEAR, AGEGRP) + i(YEAR, RACEGRP) + i(YEAR, EDUCGRP) + i(YEAR, REGION) +
      DISABL1 + DIS_YR92 + DIS_YR93 + DIS_YR94 + DIS_YR95 + DIS_YR96 + DIS_YR97
    | 0,
    weights = ~FNLWGT2,
    data = d
  )
}

run_t4_col2 <- function(df, sex_value, sample_restrict = NULL) {
  d <- df %>% filter(SEX == sex_value, OASDISSI == 0)
  if (!is.null(sample_restrict)) d <- d %>% filter(SAMPLE == sample_restrict)

  feols(
    WKSWORK ~
      i(YEAR) +
      i(AGEGRP) + i(RACEGRP) + i(EDUCGRP) + i(REGION) +
      i(YEAR, AGEGRP) + i(YEAR, RACEGRP) + i(YEAR, EDUCGRP) + i(YEAR, REGION) +
      TREND + I(TREND * DISABL1) +
      DISABL1 + DIS_YR92 + DIS_YR93 + DIS_YR94 + DIS_YR95 + DIS_YR96 + DIS_YR97
    | 0,
    weights = ~FNLWGT2,
    data = d
  )
}

run_t4_col3 <- function(df, sex_value, sample_restrict = NULL) {
  d <- df %>% filter(SEX == sex_value)
  if (!is.null(sample_restrict)) d <- d %>% filter(SAMPLE == sample_restrict)

  feols(
    WKSWORK ~
      i(YEAR) +
      i(AGEGRP) + i(RACEGRP) + i(EDUCGRP) + i(REGION) +
      i(YEAR, AGEGRP) + i(YEAR, RACEGRP) + i(YEAR, EDUCGRP) + i(YEAR, REGION) +
      DISABL1 + DIS_YR92 + DIS_YR93 + DIS_YR94 + DIS_YR95 + DIS_YR96 + DIS_YR97 +
      OASDISSI
    | 0,
    weights = ~FNLWGT2,
    data = d
  )
}

t4_men_young_c1 <- run_t4_col1(one_t4 %>% filter(SAMPLE=="young"), 1)
t4_men_old_c1   <- run_t4_col1(one_t4 %>% filter(SAMPLE=="old"),   1)

t4_men_young_c2 <- run_t4_col2(one_t4 %>% filter(SAMPLE=="young"), 1)
t4_men_old_c2   <- run_t4_col2(one_t4 %>% filter(SAMPLE=="old"),   1)

t4_men_young_c3 <- run_t4_col3(one_t4 %>% filter(SAMPLE=="young"), 1)
t4_men_old_c3   <- run_t4_col3(one_t4 %>% filter(SAMPLE=="old"),   1)

t4_women_young_c1 <- run_t4_col1(one_t4, 2, sample_restrict = "young")
t4_women_young_c2 <- run_t4_col2(one_t4, 2, sample_restrict = "young")
t4_women_young_c3 <- run_t4_col3(one_t4, 2, sample_restrict = "young")

etable(
  t4_men_young_c1, t4_men_young_c2, t4_men_young_c3,
  t4_men_old_c1,   t4_men_old_c2,   t4_men_old_c3,
  t4_women_young_c1, t4_women_young_c2, t4_women_young_c3,
  se = "standard"
)
############################################################
\end{lstlisting}

\subsection{Reanalysis: IPW and IPW+RA}
\label{app:reanalysis}

\begin{lstlisting}[language=R]
############################################################
## Appendix F: Reanalysis (IPW and IPW+RA)
############################################################

library(dplyr)
library(fixest)

pre_period <- 88:91
trim_p <- 0.99
survey_weight_var <- "FNLWGT2"

make_ps_formula <- function(df) {
  covars <- c("AGEGRP", "RACEGRP", "EDUCGRP", "REGION", "HCCC_R")
  covars <- covars[covars %in% names(df)]
  rhs <- paste0("factor(", covars, ")", collapse = " + ")
  as.formula(paste("T ~", rhs))
}

run_ipw_eventstudy_subgroup <- function(df, sex_value, age_min, age_max,
                                       pre_period = 88:91,
                                       survey_weight_var = "FNLWGT2",
                                       trim_p = 0.99) {

  d <- df %>%
    filter(
      SEX == sex_value,
      AGE >= age_min, AGE <= age_max
    ) %>%
    mutate(T = as.integer(DISABL1 == 1)) %>%
    filter(!is.na(T))

  ps_data <- d %>% filter(YEAR %in% pre_period)

  ps_form <- make_ps_formula(ps_data)
  ps_fit <- glm(ps_form, data = ps_data, family = binomial())

  d <- d %>%
    mutate(e = as.numeric(predict(ps_fit, newdata = ., type = "response")))

  p_treat <- mean(d$T[d$YEAR %in% pre_period], na.rm = TRUE)

  d <- d %>%
    mutate(
      sw = ifelse(
        T == 1,
        p_treat / pmax(e, 1e-6),
        (1 - p_treat) / pmax(1 - e, 1e-6)
      ),
      w_ipw = .data[[survey_weight_var]] * sw
    )

  wcap <- quantile(d$w_ipw, probs = trim_p, na.rm = TRUE)
  d <- d %>% mutate(w_ipw_trim = pmin(w_ipw, wcap))

  mod <- suppressMessages(feols(
    WKSWORK ~
      i(YEAR) + DISABL1 + DIS_YR92 + DIS_YR93 + DIS_YR94 + DIS_YR95 + DIS_YR96 + DIS_YR97 | 0,
    weights = ~ w_ipw_trim,
    data = d
  ))

  list(
    model = mod,
    data = d,
    ps_fit = ps_fit,
    ps_formula = ps_form,
    p_treat = p_treat,
    wcap = wcap
  )
}

ipw_young_men <- run_ipw_eventstudy_subgroup(one, sex_value = 1, age_min = 21, age_max = 39,
                                             pre_period = pre_period,
                                             survey_weight_var = survey_weight_var,
                                             trim_p = trim_p)

ipw_young_women <- run_ipw_eventstudy_subgroup(one, sex_value = 2, age_min = 21, age_max = 39,
                                               pre_period = pre_period,
                                               survey_weight_var = survey_weight_var,
                                               trim_p = trim_p)

ipw_old_men <- run_ipw_eventstudy_subgroup(one, sex_value = 1, age_min = 40, age_max = 58,
                                           pre_period = pre_period,
                                           survey_weight_var = survey_weight_var,
                                           trim_p = trim_p)

ipw_old_women <- run_ipw_eventstudy_subgroup(one, sex_value = 2, age_min = 40, age_max = 58,
                                             pre_period = pre_period,
                                             survey_weight_var = survey_weight_var,
                                             trim_p = trim_p)

etable(
  ipw_young_men$model,
  ipw_young_women$model,
  ipw_old_men$model,
  ipw_old_women$model,
  se = "standard"
)
############################################################
\end{lstlisting}




\caption*{IPW Reanalysis Table}
\begin{verbatim}
                ipw_young_men$model ipw_young_women$..   ipw_old_men$model ipw_old_women$mo..
Dependent Var.:             WKSWORK            WKSWORK             WKSWORK            WKSWORK
                                                                                             
Constant          45.10*** (0.1093)  34.60*** (0.1489)   47.50*** (0.1223)  35.13*** (0.1820)
YEAR = 89         0.4876** (0.1537)   0.4970* (0.2097)     0.2102 (0.1702)  1.133*** (0.2533)
YEAR = 90        0.5188*** (0.1527)   0.4111* (0.2088)    0.4236* (0.1687)  1.324*** (0.2517)
YEAR = 91           0.0256 (0.1526)    0.2945 (0.2087)    -0.0075 (0.1673)  1.593*** (0.2500)
YEAR = 92       -0.9993*** (0.1548)  0.5568** (0.2112)  -0.5392** (0.1715)  2.158*** (0.2557)
YEAR = 93        -1.229*** (0.1549)   0.4782* (0.2117) -0.8640*** (0.1701)  2.450*** (0.2531)
YEAR = 94       -0.8670*** (0.1563)   0.4244* (0.2136) -0.6586*** (0.1701)  2.784*** (0.2537)
YEAR = 95         -0.3403* (0.1554) 0.9511*** (0.2123)    -0.2353 (0.1676)  2.895*** (0.2504)
YEAR = 96          -0.0161 (0.1555)  1.302*** (0.2127)   -0.3270* (0.1660)  3.769*** (0.2486)
YEAR = 97           0.0477 (0.1556)  1.406*** (0.2133)    -0.0026 (0.1648)  4.025*** (0.2465)
DISABL1          -24.41*** (0.2590) -16.76*** (0.3864)  -31.37*** (0.2027) -24.06*** (0.3078)
DIS_YR92           -0.6034 (0.5631)    0.5314 (0.8396)     0.6143 (0.4389)   -1.389* (0.6668)
DIS_YR93            0.4138 (0.5532)   -1.740* (0.8061)     1.067* (0.4248)   -1.535* (0.6724)
DIS_YR94         -1.916*** (0.5503) -3.846*** (0.8012)  -1.563*** (0.4238)   -0.3210 (0.6456)
DIS_YR95         -1.988*** (0.5624) -3.729*** (0.7940)   -1.130** (0.4124)   -0.2816 (0.6222)
DIS_YR96         -3.186*** (0.5910) -3.044*** (0.7911)  -1.499*** (0.4116) -2.898*** (0.6047)
DIS_YR97         -2.991*** (0.5739) -3.805*** (0.8146)    -0.4372 (0.4071) -2.089*** (0.5949)
_______________ ___________________ __________________ ___________________ __________________
S.E. type                       IID                IID                 IID                IID
Observations                193,317            211,910             146,309            157,589
R2                          0.11628            0.02965             0.32199            0.10911
Adj. R2                     0.11620            0.02958             0.32192            0.10902
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
\end{verbatim}


\subsection{Replicated tables}
\input{table1}


% Requires in preamble:
% \usepackage{booktabs,threeparttable,adjustbox,pdflscape,caption}

\clearpage
\begin{landscape}
\thispagestyle{empty}

\begin{center}
\captionof*{table}{Table 2: Initial Results}
\label{tab:table2_initial_results}
\end{center}

\begin{center}
\begin{adjustbox}{center, max totalsize={0.98\linewidth}{0.88\textheight}}
\small
\renewcommand{\arraystretch}{1.15}
\input{table2} % table2.tex should ONLY contain threeparttable+tabular block
\end{adjustbox}
\end{center}

\end{landscape}
\clearpage

\input{table3}

\input{table4}

\end{document}
